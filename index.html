---
layout: none
---
<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ site.title | default: "Điểm tin nhanh Ngành Nông Nghiệp – AgriS" }}</title>
<meta name="description" content="{{ site.description | default: 'Tin nhanh ngành Nông nghiệp, cập nhật định kỳ theo tháng/tuần' }}">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script src="https://unpkg.com/@phosphor-icons/web"></script>

<style>
  :root{--agr:#065f46; --agr-2:#064e3b; --chip:#ecfdf5; --chipb:#10b981; --bg:#f7fee7; --line:#bbf7d0; --card:#ffffff;}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);margin:0;color:#0f172a}
  .wrap{max-width:1120px;margin:0 auto;padding:28px 16px 52px}
  .hero{ text-align:center;margin:0 0 18px; padding:26px 14px 22px;
         background:linear-gradient(180deg, #f0fdf4 0%, #f7fee7 100%);
         border:1px solid var(--line); border-radius:18px; }
  .title{font-size:clamp(28px,4.8vw,46px);color:var(--agr-2);margin:0;font-weight:800;letter-spacing:-.02em}
  .subtitle{color:#166534;font-size:clamp(16px,3.6vw,20px);opacity:.95;margin-top:6px}
  .controls{display:flex;justify-content:center;gap:10px;margin:14px 0 6px}
  .btn{border:1px solid var(--chipb);background:var(--chip);color:var(--agr);border-radius:999px;padding:.45rem .85rem;font-weight:800;cursor:pointer}
  .btn[aria-pressed="true"]{background:var(--agr);color:#ecfdf5;border-color:var(--agr)}
  .viewer{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:14px;min-height:260px;box-shadow:0 10px 18px rgba(22,163,74,.08)}
  .viewer .inner{padding:6px 6px 10px}
  .skeleton{height:11px;background:#e3f4ea;border-radius:6px;margin:9px 0;animation:pulse 1.1s infinite ease-in-out}
  @keyframes pulse{0%{opacity:.55}50%{opacity:1}100%{opacity:.55}}
  /* Card grid */
  .card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:16px;box-shadow:0 10px 18px rgba(22,163,74,.08)}
  .card:hover{transform:translateY(-1px);transition:.15s;box-shadow:0 14px 28px rgba(16,185,129,.18)}
  .badge{display:inline-flex;align-items:center;gap:.35rem;background:#ecfdf5;border:1px solid #10b981;color:#065f46;padding:.28rem .55rem;border-radius:999px;font-weight:800;font-size:.82rem}
  /* Compact mode */
  body.compact .title{font-size:1.6rem}
</style>
</head>
<body>
<div class="wrap">
  <header class="hero">
    <h1 class="title">Điểm tin nhanh Ngành Nông Nghiệp</h1>
    <div class="subtitle">AgriS • Cập nhật định kỳ theo tháng/tuần</div>

    <div class="controls">
      <button id="btnMobile" type="button" aria-pressed="false" class="btn"><i class="ph ph-device-mobile"></i> Giao diện Mobile</button>
      <button id="btnDesktop" type="button" aria-pressed="true"  class="btn"><i class="ph ph-desktop-tower"></i> Giao diện Máy tính</button>
    </div>

    <div class="flex items-center justify-center gap-2 text-sm text-emerald-800 mt-2">
      <span class="badge"><i class="ph ph-calendar-check"></i> Chọn bản điểm tin</span>
    </div>
  </header>

  {%- assign list_months = site.months | sort: "date" | reverse -%}
  {%- if site.weeks -%}
    {%- assign list_weeks = site.weeks | sort: "date" | reverse -%}
  {%- else -%}
    {%- assign list_weeks = "" | split: "" -%}
  {%- endif -%}
  {%- assign issues = list_months | concat: list_weeks -%}

  <!-- Grid thẻ báo cáo -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="cards">
    {%- for it in issues -%}
      {%- assign is_month = it.type == "month" or it.layout == "month" -%}
      <a class="card block hover:shadow-xl transition" data-href="{{ it.url | relative_url }}" data-title="{{ it.title | escape }}">
        <div class="flex items-center gap-2 text-sm text-emerald-800">
          <span class="badge"><i class="ph ph-calendar-check"></i> {% if is_month %}Tháng{% else %}Tuần{% endif %}</span>
          <span class="text-emerald-700">{{ it.date | date: "%d/%m/%Y" }}</span>
        </div>
        <h3 class="mt-2 font-extrabold text-emerald-900 leading-snug">{{ it.title }}</h3>
        <p class="text-emerald-700 text-sm mt-1 line-clamp-2">Infographic + biểu đồ + nguồn dính số liệu.</p>
      </a>
    {%- endfor -%}
  </div>

  <!-- Khung xem nhanh -->
  <div id="viewer" class="viewer mt-5">
    <div class="inner" id="viewerInner">
      <div class="skeleton" style="width:62%"></div>
      <div class="skeleton" style="width:86%"></div>
      <div class="skeleton" style="width:73%"></div>
    </div>
  </div>
</div>

<script>
(function(){
  // Toggle view-mode
  const b=document.body, m=document.getElementById('btnMobile'), d=document.getElementById('btnDesktop');
  const set=c=>{b.classList.toggle('compact',c); m.setAttribute('aria-pressed',c); d.setAttribute('aria-pressed',!c); localStorage.setItem('view-mode',c?'compact':'desktop')};
  set((localStorage.getItem('view-mode')||'')==='compact' || window.innerWidth<768);
  m.onclick=()=>set(true); d.onclick=()=>set(false);

  // SPA loader
  const viewer = document.getElementById('viewerInner');
  const cards  = document.getElementById('cards');

  async function loadIssue(url){
    viewer.innerHTML = `
      <div class="skeleton" style="width:62%"></div>
      <div class="skeleton" style="width:86%"></div>
      <div class="skeleton" style="width:73%"></div>`;
    try{
      const res = await fetch(url, {headers:{'x-requested-with':'fetch'}});
      const html = await res.text();
      const doc  = new DOMParser().parseFromString(html,'text/html');
      const root = doc.querySelector('#issue-root') || doc.body;
      viewer.innerHTML = root.innerHTML;

      // Re-render Mermaid inside viewer
      if(window.mermaid){
        mermaid.initialize({ startOnLoad:false, securityLevel:'loose' });
        const codes = viewer.querySelectorAll('pre code.language-mermaid, pre code.mermaid');
        codes.forEach((code,i)=>{
          const src = code.textContent.trim();
          const pre = code.closest('pre');
          const container = document.createElement('div');
          container.className='my-4';
          pre?.parentNode?.replaceChild(container, pre);
          try{ mermaid.render('mmdi-'+i, src, svg => container.innerHTML = svg); }
          catch(e){ container.innerHTML='<pre>'+src.replace(/</g,'&lt;')+'</pre>'; }
        });
      }
      window.scrollTo({top:0, behavior:'smooth'});
    }catch(e){
      viewer.innerHTML='<div style="padding:12px;color:#b91c1c">Không tải được nội dung. Vui lòng thử lại.</div>';
    }
  }

  // click cards (load tại chỗ)
  cards.addEventListener('click', (ev)=>{
    const a = ev.target.closest('[data-href]');
    if(!a) return;
    ev.preventDefault();
    loadIssue(a.getAttribute('data-href'));
  });

  // auto load số mới nhất
  const first = cards.querySelector('[data-href]');
  if(first) loadIssue(first.getAttribute('data-href'));
})();
</script>
</body>
</html>
